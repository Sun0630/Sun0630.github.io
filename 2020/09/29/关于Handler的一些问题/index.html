<!DOCTYPE html>
<html lang="zh-Hans">
    <!-- title -->




<!-- keywords -->




<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" >
    <meta name="author" content="Sun xin">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="Sun xin">
    
    <meta name="keywords" content="hexo,hexo-theme,hexo-blog">
    
    <meta name="description" content="Don't lose faith.">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>å…³äºHandlerçš„ä¸€äº›é—®é¢˜ Â· sunxin&#39;s Studio</title>
    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }

</style>

    <link rel="preload" href= "/css/style.css?v=20180824" as="style" onload="this.onload=null;this.rel='stylesheet'" />
    <link rel="stylesheet" href= "/css/mobile.css?v=20180824" media="(max-width: 980px)">
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" />
    
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
(function( w ){
	"use strict";
	// rel=preload support test
	if( !w.loadCSS ){
		w.loadCSS = function(){};
	}
	// define on the loadCSS obj
	var rp = loadCSS.relpreload = {};
	// rel=preload feature support test
	// runs once and returns a function for compat purposes
	rp.support = (function(){
		var ret;
		try {
			ret = w.document.createElement( "link" ).relList.supports( "preload" );
		} catch (e) {
			ret = false;
		}
		return function(){
			return ret;
		};
	})();

	// if preload isn't supported, get an asynchronous load by using a non-matching media attribute
	// then change that media back to its intended value on load
	rp.bindMediaToggle = function( link ){
		// remember existing media attr for ultimate state, or default to 'all'
		var finalMedia = link.media || "all";

		function enableStylesheet(){
			link.media = finalMedia;
		}

		// bind load handlers to enable media
		if( link.addEventListener ){
			link.addEventListener( "load", enableStylesheet );
		} else if( link.attachEvent ){
			link.attachEvent( "onload", enableStylesheet );
		}

		// Set rel and non-applicable media type to start an async request
		// note: timeout allows this to happen async to let rendering continue in IE
		setTimeout(function(){
			link.rel = "stylesheet";
			link.media = "only x";
		});
		// also enable media after 3 seconds,
		// which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
		setTimeout( enableStylesheet, 3000 );
	};

	// loop through link elements in DOM
	rp.poly = function(){
		// double check this to prevent external calls from running
		if( rp.support() ){
			return;
		}
		var links = w.document.getElementsByTagName( "link" );
		for( var i = 0; i < links.length; i++ ){
			var link = links[ i ];
			// qualify links to those with rel=preload and as=style attrs
			if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
				// prevent rerunning on link
				link.setAttribute( "data-loadcss", true );
				// bind listeners to toggle media back
				rp.bindMediaToggle( link );
			}
		}
	};

	// if unsupported, run the polyfill
	if( !rp.support() ){
		// run once at least
		rp.poly();

		// rerun poly on an interval until onload
		var run = w.setInterval( rp.poly, 500 );
		if( w.addEventListener ){
			w.addEventListener( "load", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		} else if( w.attachEvent ){
			w.attachEvent( "onload", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		}
	}


	// commonjs
	if( typeof exports !== "undefined" ){
		exports.loadCSS = loadCSS;
	}
	else {
		w.loadCSS = loadCSS;
	}
}( typeof global !== "undefined" ? global : this ) );
</script>

    <link rel="icon" href= "/assets/me.ico" />
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js" as="script" />
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" as="script" />
    <link rel="preload" href="/scripts/main.js" as="script" />
    <link rel="preload" as="font" href="/font/Oswald-Regular.ttf" crossorigin>
    <link rel="preload" as="font" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" crossorigin>
    
    <!-- fancybox -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script>
    <!-- ç™¾åº¦ç»Ÿè®¡  -->
    
    <!-- è°·æ­Œç»Ÿè®¡  -->
    
</head>

    
        <body class="post-body">
    
    
<header class="header">

    <div class="read-progress"></div>
    <div class="header-sidebar-menu">&#xe775;</div>
    <!-- posté¡µçš„toggle banner  -->
    
    <div class="banner">
            <div class="blog-title">
                <a href="/" >sunxin&#39;s Studio.</a>
            </div>
            <div class="post-title">
                <a href="#" class="post-name">å…³äºHandlerçš„ä¸€äº›é—®é¢˜</a>
            </div>
    </div>
    
    <a class="home-link" href=/>sunxin's Studio.</a>
</header>
    <div class="wrapper">
        <div class="site-intro" style="







height:50vh;
">
    
    <!-- ä¸»é¡µ  -->
    
    
    <!-- 404é¡µ  -->
            
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- æ ‡é¢˜  -->
        <h1 class="intro-title">
            <!-- ä¸»é¡µ  -->
            
            å…³äºHandlerçš„ä¸€äº›é—®é¢˜
            <!-- 404 -->
            
        </h1>
        <!-- å‰¯æ ‡é¢˜ -->
        <p class="intro-subtitle">
            <!-- ä¸»é¡µå‰¯æ ‡é¢˜  -->
            
            
            <!-- 404 -->
            
        </p>
        <!-- æ–‡ç« é¡µmeta -->
        
            <div class="post-intros">
                <!-- æ–‡ç« é¡µæ ‡ç­¾  -->
                
                    <div class= post-intro-tags >
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "æºç ">æºç </a>
    
</div>
                
                
                    <div class="post-intro-read">
                        <span>å­—æ•°ç»Ÿè®¡: <span class="post-count word-count">2k</span>é˜…è¯»æ—¶é•¿: <span class="post-count reading-time">8 min</span></span>
                    </div>
                
                <div class="post-intro-meta">
                    <span class="post-intro-calander iconfont-archer">&#xe676;</span>
                    <span class="post-intro-time">2020/09/29</span>
                    
                    <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                        <span class="iconfont-archer">&#xe602;</span>
                        <span id="busuanzi_value_page_pv"></span>
                    </span>
                    
                    <span class="shareWrapper">
                        <span class="iconfont-archer shareIcon">&#xe71d;</span>
                        <span class="shareText">Share</span>
                        <ul class="shareList">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
        
    </div>
</div>
        <script>
 
  // get user agent
  var browser = {
    versions: function () {
      var u = window.navigator.userAgent;
      return {
        userAgent: u,
        trident: u.indexOf('Trident') > -1, //IEå†…æ ¸
        presto: u.indexOf('Presto') > -1, //operaå†…æ ¸
        webKit: u.indexOf('AppleWebKit') > -1, //è‹¹æœã€è°·æ­Œå†…æ ¸
        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //ç«ç‹å†…æ ¸
        mobile: !!u.match(/AppleWebKit.*Mobile.*/), //æ˜¯å¦ä¸ºç§»åŠ¨ç»ˆç«¯
        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //iosç»ˆç«¯
        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //androidç»ˆç«¯æˆ–è€…ucæµè§ˆå™¨
        iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //æ˜¯å¦ä¸ºiPhoneæˆ–è€…å®‰å“QQæµè§ˆå™¨
        iPad: u.indexOf('iPad') > -1, //æ˜¯å¦ä¸ºiPad
        webApp: u.indexOf('Safari') == -1, //æ˜¯å¦ä¸ºwebåº”ç”¨ç¨‹åºï¼Œæ²¡æœ‰å¤´éƒ¨ä¸åº•éƒ¨
        weixin: u.indexOf('MicroMessenger') == -1, //æ˜¯å¦ä¸ºå¾®ä¿¡æµè§ˆå™¨
        uc: u.indexOf('UCBrowser') > -1 //æ˜¯å¦ä¸ºandroidä¸‹çš„UCæµè§ˆå™¨
      };
    }()
  }
  console.log("userAgent:" + browser.versions.userAgent);

  // callback
  function fontLoaded() {
    console.log('font loaded');
    if (document.getElementsByClassName('site-intro-meta')) {
      document.getElementsByClassName('intro-title')[0].classList.add('intro-fade-in');
      document.getElementsByClassName('intro-subtitle')[0].classList.add('intro-fade-in');
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in');
      }
    }
  }

  // UCä¸æ”¯æŒè·¨åŸŸï¼Œæ‰€ä»¥ç›´æ¥æ˜¾ç¤º
  function asyncCb(){
    if (browser.versions.uc) {
      console.log("UCBrowser");
      fontLoaded();
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular']
        },
        loading: function () {  //æ‰€æœ‰å­—ä½“å¼€å§‹åŠ è½½
          // console.log('loading');
        },
        active: function () {  //æ‰€æœ‰å­—ä½“å·²æ¸²æŸ“
          fontLoaded();
        },
        inactive: function () { //å­—ä½“é¢„åŠ è½½å¤±è´¥ï¼Œæ— æ•ˆå­—ä½“æˆ–æµè§ˆå™¨ä¸æ”¯æŒåŠ è½½
          console.log('inactive: timeout');
          fontLoaded();
        },
        timeout: 5000 // Set the timeout to two seconds
      });
    }
  }

  function asyncErr(){
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (cb) { o.addEventListener('load', function (e) { cb(null, e); }, false); }
    if (err) { o.addEventListener('error', function (e) { err(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }

  var asyncLoadWithFallBack = function(arr, success, reject) {
      var currReject = function(){
        reject()
        arr.shift()
        if(arr.length)
          async(arr[0], success, currReject)
        }

      async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack([
    "https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js", 
    "https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js",
    "/lib/webfontloader.min.js"
  ], asyncCb, asyncErr)
</script>        
        <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
        <div class="container container-unloaded">
            <main class="main post-page">
    <article class="article-entry">
        <h1 id="Handler-æºç åˆ†æ"><a href="#Handler-æºç åˆ†æ" class="headerlink" title="Handler æºç åˆ†æ"></a>Handler æºç åˆ†æ</h1><h2 id="å›¾ç¤º"><a href="#å›¾ç¤º" class="headerlink" title="å›¾ç¤º"></a>å›¾ç¤º</h2><p><img src="https://note.youdao.com/yws/public/resource/0feda562fdd46783b208707e90ce2e03/xmlnote/C032EC1B6BFB4BA3AD03CBD713638308/134" alt="æµç¨‹"></p>
<hr>
<p><img src="https://note.youdao.com/yws/public/resource/0feda562fdd46783b208707e90ce2e03/xmlnote/34801FBE4A5F43E289FD0A36431FB01C/143" alt="ä»£ç æµç¨‹"></p>
<hr>
<h2 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h2><h3 id="Handlerå†…å­˜æ³„éœ²"><a href="#Handlerå†…å­˜æ³„éœ²" class="headerlink" title="Handlerå†…å­˜æ³„éœ²"></a>Handlerå†…å­˜æ³„éœ²</h3><blockquote>
<p>åœºæ™¯æ¨¡æ‹Ÿï¼šä½¿ç”¨Handleråœ¨å­çº¿ç¨‹ä¸­å‘é€æ¶ˆæ¯åˆ°ä¸»çº¿ç¨‹ä¸­æ›´æ–°UIã€‚</p>
</blockquote>
<ol>
<li>å¦‚æœåœ¨å‘é€æ¶ˆæ¯çš„ä¹‹å‰è¿›è¡Œç¡çœ æ“ä½œï¼Œåœ¨è¿™æ—¶å€™ç«‹å³å…³é—­Activityï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°†ä¼šé€ æˆå†…å­˜æ³„éœ²ï¼Œå› ä¸ºåœ¨Activityé”€æ¯çš„æ—¶å€™æ²¡æœ‰ç§»é™¤Handleræ¶ˆæ¯ï¼Œä¼‘çœ ç»“æŸåæ¶ˆæ¯ä¾æ—§ä¼šè¢«å‘é€ã€‚ä¼šé€ æˆç©ºæŒ‡é’ˆå¼‚å¸¸æˆ–è€…å…¶ä»–å¼‚å¸¸ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœåœ¨<code>onDestroy</code>ä¸­è¿›è¡Œæ¶ˆæ¯ç§»é™¤<code>removeMessages</code>ï¼Œå‘ç°å¹¶æ²¡æœ‰ä»€ä¹ˆä½œç”¨ã€‚å› ä¸ºå…³é—­çš„æ—¶å€™è¿˜åœ¨ä¼‘çœ çŠ¶æ€ï¼Œæ‰€ä»¥ç§»é™¤çš„æ¶ˆæ¯ä¸ºnullã€‚å½“ä¼‘çœ ç»“æŸåæ¶ˆæ¯è¿˜æ˜¯ä¼šè¢«æ­£å¸¸å‘å‡ºã€‚</li>
<li>é’ˆå¯¹ä¼‘çœ è¿™ç§æ“ä½œï¼Œåªèƒ½åœ¨<code>onDestroy</code>ä¸­å°†Handlerå¯¹è±¡ç½®ä¸ºnullï¼Œåœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™åˆ¤ç©ºï¼Œè¿™æ ·è§£å†³ä¸€ä¸‹</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºHandler æ–¹å¼1</span></span><br><span class="line">    <span class="keyword">private</span> Handler mHandler = <span class="keyword">new</span> Handler(<span class="keyword">new</span> Handler.Callback() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">handleMessage</span><span class="params">(@NonNull Message msg)</span> </span>&#123;</span><br><span class="line">            mTextView.setText(msg.obj.toString());</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">testHandlerLeak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¼€å¯å­çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">super</span>.run();</span><br><span class="line">                Message message = Message.obtain();</span><br><span class="line">                message.what = <span class="number">1</span>;</span><br><span class="line">                message.obj = <span class="string">"hellooooo"</span>;</span><br><span class="line">                <span class="comment">// ä¼‘çœ 3s</span></span><br><span class="line">                SystemClock.sleep(<span class="number">3000</span>);</span><br><span class="line">                <span class="comment">// ä½¿ç”¨è¿™ç§æ–¹å¼å°†ä¼šåœ¨onDestroyæ–¹æ³•ä¸­ç§»é™¤æ‰</span></span><br><span class="line"><span class="comment">//                mHandler.sendEmptyMessageDelayed(1, 3000);</span></span><br><span class="line">                <span class="keyword">if</span> (mHandler != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    mHandler.sendMessage(message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        <span class="comment">// å¦‚æœä¸Šé¢ä½¿ç”¨ä¼‘çœ ï¼Œé‚£ä¹ˆåœ¨é”€æ¯Activityçš„æ—¶å€™ç§»é™¤çš„æ¶ˆæ¯ä¸ºnullï¼Œå†…å­˜æ³„éœ²å°†ä¾æ—§å­˜åœ¨</span></span><br><span class="line">        mHandler.removeMessages(<span class="number">1</span>);</span><br><span class="line">        mHandler = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å­çº¿ç¨‹åˆ›å»ºHandler"><a href="#ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å­çº¿ç¨‹åˆ›å»ºHandler" class="headerlink" title="ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å­çº¿ç¨‹åˆ›å»ºHandler"></a>ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å­çº¿ç¨‹åˆ›å»ºHandler</h3><p>å°è¯•åœ¨å­çº¿ç¨‹ä¸­åˆ›å»ºçº¿ç¨‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">               <span class="keyword">super</span>.run();</span><br><span class="line">               <span class="keyword">new</span> Handler();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;.start();</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœåœ¨åä¸ºæ‰‹æœºä¸Šè¿è¡Œä¸ä¼šæŠ¥é”™ï¼Œå¯èƒ½æ˜¯å› ä¸ºå‚å•†å¯¹åº•å±‚æºç è¿›è¡Œäº†ä¿®æ”¹ï¼Œå¦‚æœè¿è¡Œåœ¨Googleçš„æ¨¡æ‹Ÿå™¨ä¸Šï¼Œå°±ä¼šæŠ¥é”™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.RuntimeException: Can&apos;t create handler inside thread Thread[Thread-2,5,main] that has not called Looper.prepare()</span><br></pre></td></tr></table></figure></p>
<p>æ—¢ç„¶æŠ¥é”™ï¼Œå°±è¦æ‰¾æ‰¾æŠ¥é”™çš„ä»£ç åœ¨å“ªé‡Œ<br>ç›´æ¥new Handlerç‚¹è¿›å»æŸ¥çœ‹æºç ,èµ°åˆ°è¿™é‡Œ<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(@Nullable Callback callback, <span class="keyword">boolean</span> async)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">     mLooper = Looper.myLooper();</span><br><span class="line">     <span class="keyword">if</span> (mLooper == <span class="keyword">null</span>) &#123;</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</span><br><span class="line">             <span class="string">"Can't create handler inside thread "</span> + Thread.currentThread()</span><br><span class="line">                     + <span class="string">" that has not called Looper.prepare()"</span>);</span><br><span class="line">     &#125;</span><br><span class="line">   ...</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡ä¸Šé¢å…³é”®ä»£ç çœ‹å‡ºï¼Œå¦‚æœ<code>mLooper == null</code> å°±ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ï¼Œä¸ºä»€ä¹ˆlooperä¼šä¸ºç©ºå‘¢ï¼Œè¿›å…¥åˆ°Looperä¸­çœ‹ä¸€ä¸‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="meta">@Nullable</span> <span class="function">Looper <span class="title">myLooper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> sThreadLocal.get();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>looper æ˜¯ä»ThreadLocalä¸­è·å–çš„ã€‚å› ä¸ºåœ¨Androidç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œåœ¨<code>ActivityThread</code>ä¸­ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªLooperæ”¾å…¥åˆ°<code>ThreadLocalMap</code>ä¸­,è¿›å…¥<code>ActivityThread</code>ä¸­çœ‹ä¸€çœ¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Looper.prepareMainLooper();</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepareMainLooper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        prepare(<span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">synchronized</span> (Looper.class) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sMainLooper != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"The main Looper has already been prepared."</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            sMainLooper = myLooper();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">(<span class="keyword">boolean</span> quitAllowed)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (sThreadLocal.get() != <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Only one Looper may be created per thread"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       sThreadLocal.set(<span class="keyword">new</span> Looper(quitAllowed));</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>èµ°åˆ°è¿™ç±»å¯ä»¥çœ‹åˆ°ï¼ŒThreadLocalæŠŠä¸€ä¸ªä¸»çº¿ç¨‹å½“åškeyï¼ŒLooperå½“åšvalueï¼Œå­˜å…¥äº†<code>ThreadLocalMap</code>ä¸­ã€‚<br>æ‰€ä»¥ï¼Œå›å¤´çœ‹ä¸€ä¸‹ï¼Œå¦‚æœåœ¨å­çº¿ç¨‹ä¸­åˆ›å»ºHandlerï¼Œä»ThreadLocalä»¥å­çº¿ç¨‹ä¸ºkeyæ˜¯æ‹¿ä¸åˆ°Looperçš„ï¼Œæ‰€ä»¥å°±ä¸ºç©ºï¼ŒæŠ¥å‡ºäº†é‚£ä¸ªé”™è¯¯ã€‚</p>
<h3 id="textview-setText-åªèƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæ­£ç¡®å—ï¼Ÿ"><a href="#textview-setText-åªèƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæ­£ç¡®å—ï¼Ÿ" class="headerlink" title="textview.setText(),åªèƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæ­£ç¡®å—ï¼Ÿ"></a>textview.setText(),åªèƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæ­£ç¡®å—ï¼Ÿ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">       setContentView(R.layout.activity_main);</span><br><span class="line">       mTextView = findViewById(R.id.textview);</span><br><span class="line">        <span class="comment">// å¼€å¯å­çº¿ç¨‹</span></span><br><span class="line">       <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">               <span class="keyword">super</span>.run();</span><br><span class="line">               SystemClock.sleep(<span class="number">1000</span>);</span><br><span class="line">               mTextView.setText(<span class="string">"çœ‹åˆ°äº†"</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;.start();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸åŠ ç¡çœ 1sï¼Œåˆ™å¯ä»¥æ›´æ–°æˆåŠŸï¼Œå¦‚æœåŠ ä¸Šç¡çœ 1sï¼Œé‚£å°±ä¼šæŠ¥é”™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.</span><br></pre></td></tr></table></figure></p>
<p>é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸åŠ ç¡çœ 1sèƒ½æ›´æ–°æˆåŠŸå‘¢?<br>ç­”ï¼šå› ä¸ºæ›´æ–°å¤ªå¿«ï¼Œç³»ç»Ÿè¿˜æ²¡ååº”è¿‡æ¥å‘¢ã€‚ğŸ¤£ğŸ¤£ æ›´æ–°UI çš„æ–¹æ³•æ˜¯åœ¨<code>onCreate</code>æ–¹æ³•ä¸­æ‰§è¡Œçš„ï¼Œè¿™ä¸ªæ—¶å€™<code>ViewRootImpl</code>è¿˜æ²¡æœ‰åˆ›å»ºï¼Œæ‰€ä»¥<code>checkThread</code>æ–¹æ³•è¿˜æ²¡æ¥å¾—åŠæ‰§è¡Œã€‚æ‰€ä»¥å°±æ›´æ–°æˆåŠŸäº†ã€‚å› æ­¤ï¼Œä¸€æ—¦åŠ ä¸Šäº†ä¼‘çœ ï¼Œç³»ç»Ÿå°±ååº”è¿‡æ¥äº†ã€‚å°±ä¼šè¿›è¡Œçº¿ç¨‹æ£€æŸ¥ï¼Œå°±ä¼šæŠ¥å‡ºé”™è¯¯ã€‚<br>æ¯ä¸ªViewè¿›è¡Œæ›´æ–°çš„æ—¶å€™éƒ½ä¼šè¿›è¡Œ<code>requestLayout()</code>ï¼Œç„¶åä¼š<code>checkThread</code>,åˆ¤æ–­æ›´æ–°çš„çº¿ç¨‹æ˜¯å¦æ˜¯ä¸»çº¿ç¨‹<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">checkThread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="keyword">if</span> (mThread != Thread.currentThread()) &#123;</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> CalledFromWrongThreadException(</span><br><span class="line">                 <span class="string">"Only the original thread that created a view hierarchy can touch its views."</span>);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>mThread æ˜¯ä¸»çº¿ç¨‹ï¼Œè¿™é‡Œä¼šæ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦æ˜¯ä¸»çº¿ç¨‹ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæ²¡æœ‰åœ¨ onCreate é‡Œé¢æ²¡æœ‰è¿›è¡Œè¿™ä¸ªæ£€æŸ¥å‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜åŸå› å‡ºç°åœ¨ Activity çš„ç”Ÿå‘½å‘¨æœŸä¸­ , åœ¨ onCreate æ–¹æ³•ä¸­ï¼Œ UI å¤„äºåˆ›å»ºè¿‡ç¨‹ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ç•Œé¢è¿˜ä¸å¯è§ï¼Œç›´åˆ° onStart æ–¹æ³•åç•Œé¢å¯è§äº†ï¼Œå†åˆ° onResume æ–¹æ³•åé¡µé¢å¯ä»¥äº¤äº’ï¼Œä»æŸç§ç¨‹åº¦æ¥è®², åœ¨ onCreate æ–¹æ³•ä¸­ä¸èƒ½ç®—æ˜¯æ›´æ–° UIï¼Œåªèƒ½è¯´æ˜¯é…ç½® UIï¼Œæˆ–è€…æ˜¯è®¾ç½® UI å±æ€§ã€‚ è¿™ä¸ªæ—¶å€™ä¸ä¼šè°ƒç”¨åˆ° ViewRootImpl.checkThread () , å› ä¸º ViewRootImpl æ²¡æœ‰åˆ›å»ºã€‚ è€Œåœ¨ onResume æ–¹æ³•åï¼Œ ViewRootImpl æ‰è¢«åˆ›å»ºã€‚ è¿™ä¸ªæ—¶å€™å»äº¤æˆ·ç•Œé¢æ‰ç®—æ˜¯æ›´æ–° UIã€‚<br>setContentView åªæ˜¯å»ºç«‹äº† View æ ‘ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œæ¸²æŸ“å·¥ä½œ (å…¶å®çœŸæ­£çš„æ¸²æŸ“å·¥ä½œå®åœ¨ onResume ä¹‹å)ã€‚ä¹Ÿæ­£æ˜¯å»ºç«‹äº† View æ ‘ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ findViewById() æ¥è·å–åˆ° View å¯¹è±¡ï¼Œä½†æ˜¯ç”±äºå¹¶æ²¡æœ‰è¿›è¡Œæ¸²æŸ“è§†å›¾çš„å·¥ä½œï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æ‰§è¡Œ ViewRootImpl.performTransversalã€‚åŒæ · View ä¸­ä¹Ÿä¸ä¼šæ‰§è¡Œ onMeasure (), å¦‚æœåœ¨ onResume() æ–¹æ³•é‡Œç›´æ¥è·å– View.getHeight() / View.getWidth () å¾—åˆ°çš„ç»“æœæ€»æ˜¯ 0ã€‚<code>(æ‘˜è‡ªå‚è€ƒ)</code></p>
</blockquote>
<h3 id="new-Handler-ä¸¤ç§å†™æ³•çš„åŒºåˆ«"><a href="#new-Handler-ä¸¤ç§å†™æ³•çš„åŒºåˆ«" class="headerlink" title="new Handler() ä¸¤ç§å†™æ³•çš„åŒºåˆ«"></a>new Handler() ä¸¤ç§å†™æ³•çš„åŒºåˆ«</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºHandler æ–¹å¼1 æ¨èä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">private</span> Handler mHandler = <span class="keyword">new</span> Handler(<span class="keyword">new</span> Handler.Callback() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">handleMessage</span><span class="params">(@NonNull Message msg)</span> </span>&#123;</span><br><span class="line">            mTextView.setText(msg.obj.toString());</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºHandler æ–¹å¼2 æŠ¥è­¦å‘Šï¼Œä¸æ¨èä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">private</span>  Handler mHandler2 = <span class="keyword">new</span> Handler() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(@NonNull Message msg)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>.handleMessage(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>åŒºåˆ«1ï¼šåœ¨äºä¸€ä¸ªæ˜¯æ¥å£çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯Handlerå†…éƒ¨çš„ç©ºæ–¹æ³•<br>åŒºåˆ«2:åœ¨äºè°ƒç”¨æ—¶æœº<br>åœ¨ActivityThreadä¸­å¼€å¯<code>Looper.prepareMainLooper();</code>åœ¨<code>Looper.loop();</code>å¼€å¯å¾ªç¯çš„æ—¶å€™ï¼ŒLooperè½®è¯¢æ¶ˆæ¯é˜Ÿåˆ—é‡Œçš„æ¶ˆæ¯ï¼Œå¦‚æœå–åˆ°æ¶ˆæ¯ï¼Œå°±ä¼šè¿›è¡Œæ¶ˆæ¯åˆ†å‘ï¼Œäº¤ç»™Handlerå»å¤„ç†ã€‚<code>msg.target.dispatchMessage(msg);</code> targetå¯¹è±¡å°±æ˜¯Handlerå¯¹è±¡ï¼Œç„¶åå¯ä»¥è¿›å…¥Handlerä¸­çœ‹çœ‹æ˜¯å¦‚ä½•åˆ†å‘æ¶ˆæ¯çš„ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Handle system messages here.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dispatchMessage</span><span class="params">(@NonNull Message msg)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (msg.callback != <span class="keyword">null</span>) &#123;</span><br><span class="line">           handleCallback(msg);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">if</span> (mCallback != <span class="keyword">null</span>) &#123;</span><br><span class="line">               <span class="keyword">if</span> (mCallback.handleMessage(msg)) &#123;</span><br><span class="line">                   <span class="keyword">return</span>;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           handleMessage(msg);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥å‘ç°ï¼Œæ–¹å¼2æ˜¯æœ€è¢«å†·è½çš„æ–¹æ³•ï¼Œä¸Šé¢çš„æ–¹æ³•éƒ½ä¸æ‰§è¡Œï¼Œæ‰èƒ½è½®åˆ°ä»–ã€‚æ–¹å¼1çš„è¿”å›å€¼å¥½åƒæ²¡ä»€ä¹ˆä½œç”¨ï¼Œä¸ç®¡è°<code>true or false</code>ï¼Œè¿‡æ¥éƒ½è¢«returnäº†ã€‚</p>
<h3 id="ThreadLocalçš„ç”¨æ³•ä¸åŸç†"><a href="#ThreadLocalçš„ç”¨æ³•ä¸åŸç†" class="headerlink" title="ThreadLocalçš„ç”¨æ³•ä¸åŸç†"></a>ThreadLocalçš„ç”¨æ³•ä¸åŸç†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæœ¬åœ°çº¿ç¨‹(ä¸»çº¿ç¨‹)</span></span><br><span class="line">       <span class="keyword">final</span> ThreadLocal&lt;String&gt; threadLocal = <span class="keyword">new</span> ThreadLocal&lt;String&gt;()&#123;</span><br><span class="line">           <span class="meta">@Nullable</span></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">protected</span> String <span class="title">initialValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">               <span class="comment">// é‡å†™åˆå§‹åŒ–è¿”å›æ–¹æ³•ï¼Œå¦‚æœThreadLocalMapæ‹¿ä¸åˆ°å€¼ï¼Œåœ¨è°ƒç”¨è¿™ä¸ª</span></span><br><span class="line">               <span class="keyword">return</span> <span class="string">"å˜»å˜»"</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br></pre></td></tr></table></figure>
<p><code>ThreadLocal</code> å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªMapä¿å­˜ä¿¡æ¯ï¼Œkeyä¸ºå½“å‰çº¿ç¨‹ï¼Œvalueä¸ºæ³›å‹çš„ç±»å‹ï¼Œå¦‚æœThreadLocalMapè·å–ä¸åˆ°å€¼çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨åˆå§‹åŒ–æ–¹æ³•<code>initialValue</code>æ–¹æ³•è¿›è¡Œèµ‹å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»ThreadLocalMapä¸­è·å–Stringå€¼ï¼Œkeyæ˜¯ä¸»çº¿ç¨‹</span></span><br><span class="line">       System.out.println(<span class="string">"ä¸»çº¿ç¨‹ThreadLocal:"</span>+threadLocal.get());</span><br><span class="line"></span><br><span class="line">       <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">               <span class="comment">// ä»å­çº¿ç¨‹ä¸­æ‹¿å€¼ï¼Œè·å–ä¸åˆ°ï¼Œå°±ä¼šå†æ¬¡ä»åˆå§‹åŒ–æ–¹æ³•ä¸­è·å–ï¼Œä¼šè·å–åˆ°å˜»å˜»</span></span><br><span class="line">               String value = threadLocal.get();</span><br><span class="line">               System.out.println(<span class="string">"ä»å­çº¿ç¨‹ä¸­è·å–å€¼ï¼š"</span>+value); <span class="comment">// å˜»å˜»</span></span><br><span class="line">               <span class="comment">// setä¸€ä¸ªå€¼</span></span><br><span class="line">               threadLocal.set(<span class="string">"å“ˆå“ˆå“ˆ"</span>);</span><br><span class="line">               System.out.println(<span class="string">"ä»å­çº¿ç¨‹ä¸­è·å–å€¼: "</span>+threadLocal.get());<span class="comment">// å“ˆå“ˆå“ˆ</span></span><br><span class="line"></span><br><span class="line">               <span class="comment">// ä½¿ç”¨å®Œæˆéœ€è¦ç§»é™¤</span></span><br><span class="line">               threadLocal.remove();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;).start();</span><br></pre></td></tr></table></figure>
<h2 id="ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ç”¨Looperæ­»å¾ªç¯ä¸ä¼šé€ æˆANR"><a href="#ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ç”¨Looperæ­»å¾ªç¯ä¸ä¼šé€ æˆANR" class="headerlink" title="ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ç”¨Looperæ­»å¾ªç¯ä¸ä¼šé€ æˆANR"></a>ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ç”¨Looperæ­»å¾ªç¯ä¸ä¼šé€ æˆANR</h2><p>å› ä¸ºLooperåœ¨å¼€å¯æ­»å¾ªç¯çš„æ—¶å€™ï¼Œä¸€æ—¦éœ€è¦ç­‰å¾…æ—¶ï¼Œæˆ–è€…è¿˜æ²¡æœ‰åˆ°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨NDKé‡Œé¢çš„JNIæ–¹æ³•ï¼Œé‡Šæ”¾å½“å‰çš„æ—¶é—´ç‰‡ï¼Œå°±ä¸ä¼šé€ æˆANRå¼‚å¸¸</p>
<h2 id="ä¸ºä»€ä¹ˆHandleræ„é€ æ–¹æ³•é‡Œé¢çš„Looperä¸æ˜¯ç›´æ¥new"><a href="#ä¸ºä»€ä¹ˆHandleræ„é€ æ–¹æ³•é‡Œé¢çš„Looperä¸æ˜¯ç›´æ¥new" class="headerlink" title="ä¸ºä»€ä¹ˆHandleræ„é€ æ–¹æ³•é‡Œé¢çš„Looperä¸æ˜¯ç›´æ¥new"></a>ä¸ºä»€ä¹ˆHandleræ„é€ æ–¹æ³•é‡Œé¢çš„Looperä¸æ˜¯ç›´æ¥new</h2><p>å¦‚æœåœ¨ Handler æ„é€ æ–¹æ³•é‡Œé¢ç›´æ¥ new Looper(), å¯èƒ½æ˜¯æ— æ³•ä¿è¯ Looper å”¯ä¸€ï¼Œåªæœ‰ç”¨ Looper.prepare() æ‰èƒ½ä¿è¯å”¯ä¸€æ€§ï¼Œå…·ä½“å¯ä»¥çœ‹ prepare æ–¹æ³•</p>
<h2 id="MessageQueue-ä¸ºä»€ä¹ˆè¦æ”¾åœ¨-Looper-ç§æœ‰æ„é€ æ–¹æ³•åˆå§‹åŒ–ï¼Ÿ"><a href="#MessageQueue-ä¸ºä»€ä¹ˆè¦æ”¾åœ¨-Looper-ç§æœ‰æ„é€ æ–¹æ³•åˆå§‹åŒ–ï¼Ÿ" class="headerlink" title="MessageQueue ä¸ºä»€ä¹ˆè¦æ”¾åœ¨ Looper ç§æœ‰æ„é€ æ–¹æ³•åˆå§‹åŒ–ï¼Ÿ"></a>MessageQueue ä¸ºä»€ä¹ˆè¦æ”¾åœ¨ Looper ç§æœ‰æ„é€ æ–¹æ³•åˆå§‹åŒ–ï¼Ÿ</h2><p>å› ä¸ºä¸€ä¸ªçº¿ç¨‹åªç»‘å®šä¸€ä¸ª Looper ,æ‰€ä»¥åœ¨ Looper æ„é€ æ–¹æ³•é‡Œé¢åˆå§‹åŒ–å°±å¯ä»¥ä¿è¯ mQueue ä¹Ÿæ˜¯å”¯ä¸€çš„ Thread å¯¹åº”ä¸€ä¸ª Looper å¯¹åº”ä¸€ä¸ª mQueueã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://juejin.im/post/5d30b4a8f265da1b855c8f45#heading-10" target="_blank" rel="noopener">ç§»åŠ¨æ¶æ„ (äºŒ) Android ä¸­ Handler æ¶æ„åˆ†æï¼Œå¹¶å®ç°è‡ªå·±ç®€æ˜“ç‰ˆæœ¬ Handler æ¡†æ¶</a></p>

    </article>
    <!-- license  -->
    
        <div class="license-wrapper">
            <p>åŸæ–‡ä½œè€…ï¼š<a href="http://sunxin.tech">Sun xin</a>
            <p>åŸæ–‡é“¾æ¥ï¼š<a href="http://sunxin.tech/2020/09/29/å…³äºHandlerçš„ä¸€äº›é—®é¢˜/">http://sunxin.tech/2020/09/29/å…³äºHandlerçš„ä¸€äº›é—®é¢˜/</a>
            <p>å‘è¡¨æ—¥æœŸï¼š<a href="http://sunxin.tech/2020/09/29/å…³äºHandlerçš„ä¸€äº›é—®é¢˜/">September 29th 2020, 12:00:00 am</a>
            <p>æ›´æ–°æ—¥æœŸï¼š<a href="http://sunxin.tech/2020/09/29/å…³äºHandlerçš„ä¸€äº›é—®é¢˜/">September 29th 2020, 1:51:27 pm</a>
            <!-- <p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯</p> -->
        </div>
    
    <!-- paginator  -->
    <ul class="post-paginator">
        <li class="next">
            
                <div class="nextSlogan">Next Post</div>
                <a href= "/2020/12/10/PlantUMLç»˜åˆ¶ç±»å›¾6å¤§å…³ç³»è®°å½•/" title= "PlantUMLç»˜åˆ¶ç±»å›¾å…³ç³»è®°å½•">
                    <div class="nextTitle">PlantUMLç»˜åˆ¶ç±»å›¾å…³ç³»è®°å½•</div>
                </a>
            
        </li>
        <li class="previous">
            
                <div class="prevSlogan">Previous Post</div>
                <a href= "/2019/11/26/Activity çš„å¯åŠ¨æµç¨‹æºç åˆ†æ/" title= "Activity çš„å¯åŠ¨æµç¨‹æºç åˆ†æï¼ˆAndroid 9.0ï¼‰">
                    <div class="prevTitle">Activity çš„å¯åŠ¨æµç¨‹æºç åˆ†æï¼ˆAndroid 9.0ï¼‰</div>
                </a>
            
        </li>
    </ul>
    <!-- è¯„è®ºæ’ä»¶ -->
    <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->

<!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->
    
    
    <!-- partial('_partial/comment/changyan') -->
    <!--PCç‰ˆ-->


    
    

    <!-- è¯„è®º -->
</main>
            <!-- profile -->
            
        </div>
        <footer class="footer footer-unloaded">
    <!-- social  -->
    
    <div class="social">
        
    
        
            
                <a href="mailto:sunxin0630@gmail.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="//github.com/sun0630" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
            
                <span class="iconfont-archer wechat" title=wechat>
                  
                  <img class="profile-qr" src="/assets/wechat_qr.png" />
                </span>
            
        
    
        
    
        
    
        
            
                <a href="//weibo.com/2719076927/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" class="iconfont-archer weibo" target="_blank" title=weibo></a>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- ä¸è’œå­  -->
    
    <div class="busuanzi-container">
    
     
    <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
    
    </div>
    
</footer>
    </div>
    <!-- toc -->
    
    <div class="toc-wrapper" style=
    







top:50vh;

    >
        <div class="toc-catalog">
            <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
        </div>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Handler-æºç åˆ†æ"><span class="toc-number">1.</span> <span class="toc-text">Handler æºç åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#å›¾ç¤º"><span class="toc-number">1.1.</span> <span class="toc-text">å›¾ç¤º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é—®é¢˜åˆ†æ"><span class="toc-number">1.2.</span> <span class="toc-text">é—®é¢˜åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Handlerå†…å­˜æ³„éœ²"><span class="toc-number">1.2.1.</span> <span class="toc-text">Handlerå†…å­˜æ³„éœ²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å­çº¿ç¨‹åˆ›å»ºHandler"><span class="toc-number">1.2.2.</span> <span class="toc-text">ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å­çº¿ç¨‹åˆ›å»ºHandler</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#textview-setText-åªèƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæ­£ç¡®å—ï¼Ÿ"><span class="toc-number">1.2.3.</span> <span class="toc-text">textview.setText(),åªèƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæ­£ç¡®å—ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#new-Handler-ä¸¤ç§å†™æ³•çš„åŒºåˆ«"><span class="toc-number">1.2.4.</span> <span class="toc-text">new Handler() ä¸¤ç§å†™æ³•çš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ThreadLocalçš„ç”¨æ³•ä¸åŸç†"><span class="toc-number">1.2.5.</span> <span class="toc-text">ThreadLocalçš„ç”¨æ³•ä¸åŸç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ç”¨Looperæ­»å¾ªç¯ä¸ä¼šé€ æˆANR"><span class="toc-number">1.3.</span> <span class="toc-text">ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ç”¨Looperæ­»å¾ªç¯ä¸ä¼šé€ æˆANR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸ºä»€ä¹ˆHandleræ„é€ æ–¹æ³•é‡Œé¢çš„Looperä¸æ˜¯ç›´æ¥new"><span class="toc-number">1.4.</span> <span class="toc-text">ä¸ºä»€ä¹ˆHandleræ„é€ æ–¹æ³•é‡Œé¢çš„Looperä¸æ˜¯ç›´æ¥new</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MessageQueue-ä¸ºä»€ä¹ˆè¦æ”¾åœ¨-Looper-ç§æœ‰æ„é€ æ–¹æ³•åˆå§‹åŒ–ï¼Ÿ"><span class="toc-number">1.5.</span> <span class="toc-text">MessageQueue ä¸ºä»€ä¹ˆè¦æ”¾åœ¨ Looper ç§æœ‰æ„é€ æ–¹æ³•åˆå§‹åŒ–ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚è€ƒ"><span class="toc-number">1.6.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol></li></ol>
    </div>
    
    <div class="back-top iconfont-archer">&#xe639;</div>
    <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
          <div class="sidebar-panel-archives">
    <!-- åœ¨ejsä¸­å°†archiveæŒ‰ç…§æ—¶é—´æ’åº -->
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 31
        </div>
        <!-- search  -->
        
    </div>
    
    <div class="post-archive">
    
    
    
    
    <div class="archive-year"> Invalid date </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">Invalid date</span><a class="archive-post-title" href= "/2018/09/08/Androidæ€§èƒ½ä¼˜åŒ–/" >Androidæ€§èƒ½ä¼˜åŒ–</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2020 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/10</span><a class="archive-post-title" href= "/2020/12/10/PlantUMLç»˜åˆ¶ç±»å›¾6å¤§å…³ç³»è®°å½•/" >PlantUMLç»˜åˆ¶ç±»å›¾å…³ç³»è®°å½•</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/29</span><a class="archive-post-title" href= "/2020/09/29/å…³äºHandlerçš„ä¸€äº›é—®é¢˜/" >å…³äºHandlerçš„ä¸€äº›é—®é¢˜</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2019 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/26</span><a class="archive-post-title" href= "/2019/11/26/Activity çš„å¯åŠ¨æµç¨‹æºç åˆ†æ/" >Activity çš„å¯åŠ¨æµç¨‹æºç åˆ†æï¼ˆAndroid 9.0ï¼‰</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/22</span><a class="archive-post-title" href= "/2019/07/22/å™©æ¢¦å°è®°/" >å™©æ¢¦å°è®°</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/22</span><a class="archive-post-title" href= "/2019/07/22/ä»Šå¤©/" >ä»Šå¤©</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2018 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/25</span><a class="archive-post-title" href= "/2018/10/25/è°ˆè°ˆTCPåè®®çš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹/" >è°ˆè°ˆTCPåè®®çš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/24</span><a class="archive-post-title" href= "/2018/10/24/Httpåè®®/" >Httpåè®®äº†è§£å¤šå°‘</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/09</span><a class="archive-post-title" href= "/2018/10/09/Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± çŸ¥å¤šå°‘/" >Androidçš„çº¿ç¨‹å’Œçº¿ç¨‹æ± çŸ¥å¤šå°‘</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/è£…é¥°è®¾è®¡æ¨¡å¼/" >è£…é¥°è®¾è®¡æ¨¡å¼</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/è‡ªå®šä¹‰View-å­—ä½“å˜è‰²/" >è‡ªå®šä¹‰View - ä¸€ä¸ªæ–‡å­—ä¸¤ç§é¢œè‰²</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/æ„å»ºå…¨å±€çš„å¼‚å¸¸æ•æ‰ç±»/" >Android-æ„å»ºå…¨å±€çš„å¼‚å¸¸æ•æ‰ç±»</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/æˆ‘å«å…¹æ‹‰å¦/" >æˆ‘å«å…¹æ‹‰å¦ï¼ŒWho the hell are you?</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/ä»£ç†è®¾è®¡æ¨¡å¼/" >ä»£ç†è®¾è®¡æ¨¡å¼</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/ä»æºç è§’åº¦åˆ†æScrollViewåµŒå¥—ListViewæ˜¾ç¤ºä¸å…¨çš„é—®é¢˜/" >ä»æºç è§’åº¦åˆ†æSrcollViewåµŒå¥—ListViewæ˜¾ç¤ºä¸å…¨çš„é—®é¢˜</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/ä¸å¯æ€è®®ï¼Œä½†è¿™å°±æ˜¯è¶³çƒ/" >ä¸å¯æ€è®®ï¼Œä½†è¿™å°±æ˜¯è¶³çƒ</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/ä¸Šä¼ emojiè¡¨æƒ…åˆ°æœåŠ¡å™¨çš„é—®é¢˜/" >Android-ä¸Šä¼ Emojiè¡¨æƒ…åˆ°æœåŠ¡å™¨çš„é—®é¢˜</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/MVPæ¨¡å¼-å°æ¡ˆä¾‹/" >Android - MVPæ¨¡å¼å°è¯•</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/LinkedList (JDK8) æºç è§£æ/" >LinkedList (JDK8) æºç è§£æ</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/KotlinåŸºç¡€-ç±»ä¸å±æ€§/" >KotlinåŸºç¡€-ç±»å’Œå±æ€§</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/KotlinåŸºç¡€-å˜é‡ä¸å‡½æ•°/" >KotlinåŸºç¡€-å‡½æ•°å’Œå˜é‡</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/JavaScriptå­¦ä¹ ç¬”è®°02/" >JavaScriptå­¦ä¹ ç¬”è®°02_å‡½æ•°</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/08</span><a class="archive-post-title" href= "/2018/09/08/JavaScriptå­¦ä¹ ç¬”è®°01/" >JavaScriptå­¦ä¹ ç¬”è®°01_åŸºç¡€è¯­æ³•</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/06</span><a class="archive-post-title" href= "/2018/03/06/Androidçš„æ¶ˆæ¯æœºåˆ¶/" >Androidæ¶ˆæ¯æœºåˆ¶æºç åˆ†æ</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> Invalid date </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">Invalid date</span><a class="archive-post-title" href= "/2018/09/08/Bitmapçš„åŠ è½½å’ŒCache/" >Bitmapçš„åŠ è½½ä¸ç¼“å­˜ç­–ç•¥</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> Invalid date </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">Invalid date</span><a class="archive-post-title" href= "/2018/09/08/Builder(å»ºé€ è€…)è®¾è®¡æ¨¡å¼/" >å»ºé€ è€…(Builder)è®¾è®¡æ¨¡å¼</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> Invalid date </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">Invalid date</span><a class="archive-post-title" href= "/2018/09/08/ArrayList (JDK8) æºç è§£æ/" >ArrayList (JDK8) æºç è§£æ</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> Invalid date </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">Invalid date</span><a class="archive-post-title" href= "/2018/09/08/EventBus3.1.1 æºç åˆ†æ/" >EventBus 3.1.1 æºç åˆ†æ</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> Invalid date </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">Invalid date</span><a class="archive-post-title" href= "/2018/09/08/Gitä½¿ç”¨/" >Gitå­¦ä¹ </a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> Invalid date </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">Invalid date</span><a class="archive-post-title" href= "/2018/09/08/getViewæ–¹æ³•ä¸­ä¸ºViewè®¾ç½®ç›‘å¬positioné”™ä¹±çš„é—®é¢˜/" >Android-è§£å†³ListViewçš„getView()æ–¹æ³•ä¸­Viewè®¾ç½®ç›‘å¬positioné”™ä¹±çš„é—®é¢˜</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> Invalid date </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">Invalid date</span><a class="archive-post-title" href= "/2019/07/22/å™©æ¢¦å°è®°2/" >å™©æ¢¦å°è®°2</a>
        </li>
    
    </div>
  </div>
        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
    
        <span class="sidebar-tag-name" data-tags="å¼€å‘è‰ºæœ¯æ¢ç´¢"><span class="iconfont-archer">&#xe606;</span>å¼€å‘è‰ºæœ¯æ¢ç´¢</span>
    
        <span class="sidebar-tag-name" data-tags="æºç åˆ†æ"><span class="iconfont-archer">&#xe606;</span>æºç åˆ†æ</span>
    
        <span class="sidebar-tag-name" data-tags="å¼€å‘è‰ºæœ¯æ¢ç´¢ æºç "><span class="iconfont-archer">&#xe606;</span>å¼€å‘è‰ºæœ¯æ¢ç´¢ æºç </span>
    
        <span class="sidebar-tag-name" data-tags="è®¾è®¡æ¨¡å¼"><span class="iconfont-archer">&#xe606;</span>è®¾è®¡æ¨¡å¼</span>
    
        <span class="sidebar-tag-name" data-tags="æºç "><span class="iconfont-archer">&#xe606;</span>æºç </span>
    
        <span class="sidebar-tag-name" data-tags="JavaScript"><span class="iconfont-archer">&#xe606;</span>JavaScript</span>
    
        <span class="sidebar-tag-name" data-tags="é¢è¯•"><span class="iconfont-archer">&#xe606;</span>é¢è¯•</span>
    
        <span class="sidebar-tag-name" data-tags="Git"><span class="iconfont-archer">&#xe606;</span>Git</span>
    
        <span class="sidebar-tag-name" data-tags="Kotlin in Action"><span class="iconfont-archer">&#xe606;</span>Kotlin in Action</span>
    
        <span class="sidebar-tag-name" data-tags="UML"><span class="iconfont-archer">&#xe606;</span>UML</span>
    
        <span class="sidebar-tag-name" data-tags="Androidè®¾è®¡æ¨¡å¼"><span class="iconfont-archer">&#xe606;</span>Androidè®¾è®¡æ¨¡å¼</span>
    
        <span class="sidebar-tag-name" data-tags="å®ç”¨"><span class="iconfont-archer">&#xe606;</span>å®ç”¨</span>
    
        <span class="sidebar-tag-name" data-tags="ä¸ªäººåšå®¢"><span class="iconfont-archer">&#xe606;</span>ä¸ªäººåšå®¢</span>
    
        <span class="sidebar-tag-name" data-tags="è®°å½•"><span class="iconfont-archer">&#xe606;</span>è®°å½•</span>
    
        <span class="sidebar-tag-name" data-tags="æ„Ÿæ‚Ÿ"><span class="iconfont-archer">&#xe606;</span>æ„Ÿæ‚Ÿ</span>
    
        <span class="sidebar-tag-name" data-tags="è¸©å‘å®è·µ"><span class="iconfont-archer">&#xe606;</span>è¸©å‘å®è·µ</span>
    
        <span class="sidebar-tag-name" data-tags="éšæƒ³"><span class="iconfont-archer">&#xe606;</span>éšæƒ³</span>
    
        <span class="sidebar-tag-name" data-tags="è‡ªå®šä¹‰View"><span class="iconfont-archer">&#xe606;</span>è‡ªå®šä¹‰View</span>
    
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
    ç¼ºå¤±æ¨¡å—ã€‚<br/>
    1ã€è¯·ç¡®ä¿nodeç‰ˆæœ¬å¤§äº6.2<br/>
    2ã€åœ¨åšå®¢æ ¹ç›®å½•ï¼ˆæ³¨æ„ä¸æ˜¯archeræ ¹ç›®å½•ï¼‰æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br/>
    <span style="color: #f75357; font-size: 1rem; line-height: 2rem;">npm i hexo-generator-json-content --save</span><br/>
    3ã€åœ¨æ ¹ç›®å½•_config.ymlé‡Œæ·»åŠ é…ç½®ï¼š
    <pre style="color: #787878; font-size: 0.6rem;">
jsonContent:
  meta: false
  pages: false
  posts:
    title: true
    date: true
    path: true
    text: false
    raw: false
    content: false
    slug: false
    updated: false
    comments: false
    link: false
    permalink: false
    excerpt: false
    categories: true
    tags: true</pre>
    </div> 
    <div class="sidebar-tags-list"></div>
</div>
        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
        <span class="sidebar-category-name" data-categories="Androidå¼€å‘è‰ºæœ¯æ¢ç´¢"><span class="iconfont-archer">&#xe60a;</span>Androidå¼€å‘è‰ºæœ¯æ¢ç´¢</span>
    
        <span class="sidebar-category-name" data-categories="ä¸€æ­¥ä¸€æ­¥è¿›å…¥é«˜çº§è¡Œåˆ—"><span class="iconfont-archer">&#xe60a;</span>ä¸€æ­¥ä¸€æ­¥è¿›å…¥é«˜çº§è¡Œåˆ—</span>
    
        <span class="sidebar-category-name" data-categories="è®¾è®¡æ¨¡å¼ç³»åˆ—"><span class="iconfont-archer">&#xe60a;</span>è®¾è®¡æ¨¡å¼ç³»åˆ—</span>
    
        <span class="sidebar-category-name" data-categories="Java"><span class="iconfont-archer">&#xe60a;</span>Java</span>
    
        <span class="sidebar-category-name" data-categories="JavaScript"><span class="iconfont-archer">&#xe60a;</span>JavaScript</span>
    
        <span class="sidebar-category-name" data-categories="è®¡ç®—æœºç½‘ç»œ"><span class="iconfont-archer">&#xe60a;</span>è®¡ç®—æœºç½‘ç»œ</span>
    
        <span class="sidebar-category-name" data-categories="Android-ä¸‰æ–¹å¼€æºåº“"><span class="iconfont-archer">&#xe60a;</span>Android-ä¸‰æ–¹å¼€æºåº“</span>
    
        <span class="sidebar-category-name" data-categories="Git"><span class="iconfont-archer">&#xe60a;</span>Git</span>
    
        <span class="sidebar-category-name" data-categories="Kotlin-in-Action"><span class="iconfont-archer">&#xe60a;</span>Kotlin-in-Action</span>
    
        <span class="sidebar-category-name" data-categories="UML"><span class="iconfont-archer">&#xe60a;</span>UML</span>
    
        <span class="sidebar-category-name" data-categories="AndroidæŠ€æœ¯"><span class="iconfont-archer">&#xe60a;</span>AndroidæŠ€æœ¯</span>
    
        <span class="sidebar-category-name" data-categories="è¸©å‘å®è·µ"><span class="iconfont-archer">&#xe60a;</span>è¸©å‘å®è·µ</span>
    
        <span class="sidebar-category-name" data-categories="Life"><span class="iconfont-archer">&#xe60a;</span>Life</span>
    
        <span class="sidebar-category-name" data-categories="æºç åˆ†æ"><span class="iconfont-archer">&#xe60a;</span>æºç åˆ†æ</span>
    
        <span class="sidebar-category-name" data-categories="è‡ªå®šä¹‰Viewç³»åˆ—"><span class="iconfont-archer">&#xe60a;</span>è‡ªå®šä¹‰Viewç³»åˆ—</span>
    
        <span class="sidebar-category-name" data-categories="æºç "><span class="iconfont-archer">&#xe60a;</span>æºç </span>
    
        <span class="sidebar-category-name" data-categories="AndroidæŠ€æœ¯/ä¸ªäººåšå®¢"><span class="iconfont-archer">&#xe60a;</span>AndroidæŠ€æœ¯/ä¸ªäººåšå®¢</span>
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>
    </div>
</div> 
    <script>
    var siteMeta = {
        root: "/",
        author: "Sun xin"
    }
</script>
    <!-- CDN failover -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ === 'undefined')
        {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js">\x3C/script>')
        }
    </script>
    <script src="/scripts/main.js"></script>
    <!-- algolia -->
    
    <!-- busuanzi  -->
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    <!-- CNZZ  -->
    
    </div>
    <!-- async load share.js -->
    
        <script src="/scripts/share.js" async></script>    
     
    </body>
</html>


